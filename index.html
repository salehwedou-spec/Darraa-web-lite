<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>الدراعة | متجر</title>
<style>
  :root{
    --green:#0d5c51; --green-900:#0a4740; --gold:#c89a2b; --gold-700:#a67e1f;
    --bg:#f6f7f4; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
    --shadow:0 12px 30px rgba(0,0,0,.06); --r:18px;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans Arabic","Noto Kufi Arabic",sans-serif}

  /* SPLASH */
  #splash{position:fixed;inset:0;display:grid;place-items:center;background:var(--green);color:#fff;z-index:50}
  .brand-mark{width:70px;height:70px;border-radius:22px;
    background:radial-gradient(circle at 30% 30%,#fbe8b4,var(--gold));border:3px solid #fff}
  .fade{animation:fade 1s ease forwards} @keyframes fade{to{opacity:0;visibility:hidden}}

  /* AUTH */
  .auth{min-height:100svh;display:grid;place-items:center;padding:20px}
  .card{width:min(92vw,460px);background:#fff;border:1px solid var(--line);border-radius:24px;box-shadow:var(--shadow);padding:22px}
  .logo{display:flex;align-items:center;gap:12px;margin-bottom:8px}
  .title{font-size:24px;color:var(--green);font-weight:800;margin:0 0 10px}
  .row{display:flex;gap:10px;align-items:center}
  .field{display:grid;gap:6px;margin:10px 0}
  label{color:var(--muted);font-size:13px}
  .input, select, textarea{padding:.8rem .9rem;border:1px solid var(--line);border-radius:12px;background:#fff;width:100%}
  .btn{padding:.9rem 1rem;border-radius:12px;border:1px solid var(--gold);background:var(--gold);color:#fff;font-weight:800;cursor:pointer}
  .btn.ghost{background:#fff;color:var(--ink);border-color:var(--line)}
  .hint{color:var(--muted);font-size:12px;margin-top:6px;text-align:center}

  /* APP HEADER */
  .topbar{position:sticky;top:0;background:var(--green);color:#fff;z-index:10}
  .topbar .wrap{max-width:1120px;margin:auto;padding:12px 16px;display:flex;align-items:center;gap:10px}
  .icon-btn{width:40px;height:40px;border-radius:12px;border:1px solid #ffffff30;background:#ffffff20;display:grid;place-items:center;cursor:pointer}
  .grow{flex:1}

  /* HOME */
  .shell{max-width:1120px;margin:auto;padding:16px}
  .hello{font-weight:800;margin:10px 0}
  .banner{border-radius:18px;padding:14px;background:linear-gradient(135deg,#ffedc2,#ffd77a);display:grid;grid-template-columns:1fr 110px;gap:10px;align-items:center;border:1px solid #f1c56a}
  .banner h3{margin:0 0 6px 0}
  .banner img{width:100%;height:100%;object-fit:cover;border-radius:14px;border:2px solid #f6e2a3}

  .grid2{display:grid;gap:10px;margin-top:14px}
  @media(min-width:700px){ .grid2{grid-template-columns:repeat(2,1fr)} }
  .opt-card{background:#fff;border:1px solid var(--line);border-radius:16px;padding:12px;display:grid;gap:8px}
  .opt-card h4{margin:0;font-size:15px;color:var(--green)}
  .chip{display:inline-block;padding:.35rem .6rem;border:1px solid var(--line);border-radius:999px;background:#fff;margin:3px 4px 0 0;cursor:pointer}
  .chip.active{border-color:var(--gold);box-shadow:0 0 0 2px #f7e3aa inset}

  .sec-title{margin:16px 0 8px;color:var(--green);font-weight:800}

  .grid{display:grid;gap:14px}
  @media(min-width:740px){.grid{grid-template-columns:repeat(3,1fr)}}
  .product{background:#fff;border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
  .thumb{aspect-ratio:4/3;overflow:hidden}
  .thumb img{width:100%;height:100%;object-fit:cover}
  .meta{padding:10px;display:grid;gap:6px}
  .price{color:var(--gold);font-weight:800}
  .actions{display:flex;gap:8px;margin-top:6px}
  .pill{padding:.55rem .9rem;border:1px solid var(--line);border-radius:999px;background:#fff;cursor:pointer}

  /* BOTTOM NAV */
  .bottom{position:sticky;bottom:0;background:#fff;border-top:1px solid var(--line)}
  .tabs{max-width:1120px;margin:auto;display:grid;grid-template-columns:repeat(4,1fr);gap:6px;padding:8px}
  .tab{border:1px solid var(--line);border-radius:12px;padding:.6rem;text-align:center;cursor:pointer}
  .tab.active{border-color:var(--green);box-shadow:0 0 0 2px #cfe8e4 inset;color:var(--green)}

  /* HIDE/SHOW */
  .hidden{display:none}
</style>
</head>
<body>

<!-- SPLASH -->
<div id="splash">
  <div style="text-align:center">
    <div class="brand-mark" style="margin:auto"></div>
    <div style="margin-top:10px;font-weight:800">الدراعة</div>
  </div>
</div>

<!-- AUTH -->
<section id="auth" class="auth hidden">
  <div class="card">
    <div class="logo"><div class="brand-mark" style="width:40px;height:40px;border:2px solid #fff"></div><b style="color:var(--green)">الدراعة</b></div>
    <div class="row" style="gap:8px;margin-bottom:10px">
      <button id="tabLogin" class="pill" style="border-color:var(--gold);color:var(--gold)">تسجيل الدخول</button>
      <button id="tabSignup" class="pill">إنشاء حساب</button>
    </div>

    <div id="loginBox">
      <h3 class="title">تسجيل الدخول</h3>
      <div class="field"><label>رقم الهاتف</label><input id="loginPhone" class="input" placeholder="22 33 44 55"></div>
      <div class="field"><label>كلمة المرور</label><input id="loginPass" type="password" class="input" placeholder="••••••••"></div>
      <button id="doLogin" class="btn" style="width:100%;margin-top:6px">دخول</button>
      <div class="hint">نسخة اختبار: أي بيانات تعمل، سنضيف OTP لاحقًا.</div>
    </div>

    <div id="signupBox" class="hidden">
      <h3 class="title">إنشاء حساب</h3>
      <div class="field"><label>الاسم</label><input id="nameNew" class="input" placeholder="اسم المستخدم"></div>
      <div class="field"><label>رقم الهاتف</label><input id="phoneNew" class="input" placeholder="22 33 44 55"></div>
      <div class="field"><label>كلمة المرور</label><input id="passNew" type="password" class="input" placeholder="••••••••"></div>
      <button id="doSignup" class="btn" style="width:100%;margin-top:6px">إنشاء وتسجيل الدخول</button>
      <div class="hint">سيتم إضافة توثيق برمز (OTP) لاحقًا.</div>
    </div>
  </div>
</section>

<!-- APP -->
<section id="app" class="hidden">
  <!-- HEADER -->
  <div class="topbar">
    <div class="wrap">
      <div class="icon-btn" title="حسابي" id="btnAccount">👤</div>
      <div class="grow"></div>
      <div class="icon-btn" title="القائمة" id="btnMenu">≡</div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="shell">
    <div id="hello" class="hello">مرحبًا بك، ضيف</div>

    <!-- BANNER -->
    <div class="banner">
      <div>
        <h3>اطلب الآن واستلم خلال يومين</h3>
        <div class="mini">خياطة راقية وخنط أصيل — اختياراتك تصل لباب منزلك.</div>
      </div>
      <!-- استخدمنا إحدى صورك الحالية -->
      <img src="images (15).jpeg" alt="دعاية">
    </div>

    <!-- اختيارات أساسية -->
    <div class="grid2">
      <div class="opt-card">
        <h4>الخنط (الطريز)</h4>
        <select id="selKhnt">
          <option>كلاسيكي</option><option>حديث</option><option>ثقيل ذهبي</option>
        </select>
      </div>
      <div class="opt-card">
        <h4>الدسيه</h4>
        <select id="selDasiya">
          <option>مخففة</option><option>متوسطة</option><option>ثقيلة</option>
        </select>
      </div>
      <div class="opt-card">
        <h4>نوع/لون السلك</h4>
        <select id="selSilkType">
          <option>سلك ذهبي لامع</option><option>سلك فضي</option><option>سلك أبيض مطفي</option>
        </select>
        <div class="row">
          <span class="chip active" data-color="#c89a2b">ذهبي</span>
          <span class="chip" data-color="#b0b7c3">فضي</span>
          <span class="chip" data-color="#ffffff">أبيض</span>
        </div>
      </div>
      <div class="opt-card">
        <h4>اللون الأساسي</h4>
        <div class="row">
          <span class="chip active" data-base="#e7f0fb">أزرق فاتح</span>
          <span class="chip" data-base="#ffffff">أبيض</span>
          <span class="chip" data-base="#eaeef7">أزرق ثلجي</span>
        </div>
      </div>
      <div class="opt-card">
        <h4>الطول</h4>
        <div class="row">
          <span class="chip active" data-length="8">8 أمتار (طبيعي)</span>
          <span class="chip" data-length="10">10 أمتار (طويل)</span>
        </div>
      </div>
    </div>

    <!-- عروض خاصة -->
    <h3 class="sec-title">عروض خاصة</h3>
    <div class="grid" id="offers"></div>

    <!-- منتجات متاحة الآن -->
    <h3 class="sec-title">متاح الآن</h3>
    <div class="grid" id="catalog"></div>
  </div>

  <!-- BOTTOM NAV -->
  <div class="bottom">
    <div class="tabs">
      <div class="tab" id="tabCart">🛒 السلة</div>
      <div class="tab" id="tabFav">⭐ أعجبتني</div>
      <div class="tab active" id="tabHome">🏠 الرئيسية</div>
      <div class="tab" id="tabMsg">💬 راسلنا</div>
    </div>
  </div>
</section>

<script>
/* ========== SPLASH → AUTH ========= */
setTimeout(()=>{ document.getElementById('splash').classList.add('fade'); document.getElementById('auth').classList.remove('hidden'); }, 1200);

/* ========== AUTH LOGIC ========= */
const auth = {
  showLogin(){ loginBox.classList.remove('hidden'); signupBox.classList.add('hidden'); tabLogin.style.color='var(--gold)'; tabSignup.style.color='inherit'; },
  showSignup(){ signupBox.classList.remove('hidden'); loginBox.classList.add('hidden'); tabSignup.style.color='var(--gold)'; tabLogin.style.color='inherit'; },
  login(){ 
    const phone = document.getElementById('loginPhone').value.trim();
    const pass  = document.getElementById('loginPass').value.trim();
    if(!phone||!pass){ alert('أدخل الهاتف وكلمة المرور'); return; }
    localStorage.setItem('user', JSON.stringify({ name: 'مستخدم', phone }));
    goHome();
  },
  signup(){
    const name = document.getElementById('nameNew').value.trim();
    const phone= document.getElementById('phoneNew').value.trim();
    const pass = document.getElementById('passNew').value.trim();
    if(!name||!phone||!pass){ alert('أكمل الحقول'); return; }
    localStorage.setItem('user', JSON.stringify({ name, phone }));
    goHome();
  }
};

const tabLogin  = document.getElementById('tabLogin');
const tabSignup = document.getElementById('tabSignup');
const loginBox  = document.getElementById('loginBox');
const signupBox = document.getElementById('signupBox');
tabLogin.onclick  = ()=>auth.showLogin();
tabSignup.onclick = ()=>auth.showSignup();
document.getElementById('doLogin').onclick  = ()=>auth.login();
document.getElementById('doSignup').onclick = ()=>auth.signup();

/* ======= ON LOAD: auto-login if user exists ======= */
(function(){
  const u = localStorage.getItem('user');
  if(u) goHome();
})();
function goHome(){
  const u = JSON.parse(localStorage.getItem('user')||'{}');
  document.getElementById('hello').textContent = 'مرحبًا بك، '+ (u.name || u.phone || 'ضيف');
  document.getElementById('auth').classList.add('hidden');
  document.getElementById('app').classList.remove('hidden');
}

/* ========== OPTIONS INTERACTION ========= */
document.querySelectorAll('.chip').forEach(ch=>{
  ch.onclick = ()=>{ // تفعيل بصري
    const peers = ch.parentElement.querySelectorAll('.chip');
    peers.forEach(p=>p.classList.remove('active'));
    ch.classList.add('active');
  };
});

/* ========== DATA ========= */
const PRODUCTS = [
  { id:'p1', title:'طريز كلاسيكي', price:28000, img:'images (1) (1).jpeg' },
  { id:'p2', title:'طريز عصري',    price:32000, img:'images (14).jpeg'    },
  { id:'p3', title:'طريز رسمي',    price:40000, img:'images (15).jpeg'    },
];
const OFFERS = [
  { id:'o1', title:'عرض -20%', price:26000, img:'images (14).jpeg' },
  { id:'o2', title:'سعر مميز',   price:30000, img:'images (1) (1).jpeg' },
];

const fmt = n => (n||0).toLocaleString('ar-MR');

/* ========== RENDER GRIDS ========= */
function card(item){
  const el = document.createElement('div'); el.className='product';
  el.innerHTML = `
    <div class="thumb"><img alt="${item.title}" src="${item.img}" onerror="this.src='images/${item.img}'"></div>
    <div class="meta">
      <b>${item.title}</b>
      <div class="price">${fmt(item.price)} أوقية</div>
      <div class="actions">
        <button class="btn" onclick="addToCart('${item.id}')">أضف للسلة</button>
        <button class="pill" onclick="fav('${item.id}')">أعجبني</button>
      </div>
    </div>`;
  return el;
}
function render(){
  const offers = document.getElementById('offers'); offers.innerHTML='';
  OFFERS.forEach(x=>offers.appendChild(card(x)));
  const cat = document.getElementById('catalog'); cat.innerHTML='';
  PRODUCTS.forEach(x=>cat.appendChild(card(x)));
}
render();

/* ========== CART & FAV (front-only) ========= */
let CART=[], FAV=[];
function addToCart(id){
  const item = [...PRODUCTS, ...OFFERS].find(x=>x.id===id);
  if(!item) return;
  CART.push(item);
  alert('أضيف إلى السلة: '+item.title);
}
function fav(id){
  const item = [...PRODUCTS, ...OFFERS].find(x=>x.id===id);
  if(!item) return;
  if(!FAV.find(x=>x.id===id)) FAV.push(item);
  alert('أُضيف لقائمة الإعجاب');
}

/* ========== BOTTOM TABS ========= */
function activateTab(id){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id==='tabCart') alert('عدد العناصر في السلة: '+CART.length);
  if(id==='tabFav')  alert('عدد العناصر المعجبة: '+FAV.length);
  if(id==='tabMsg')  alert('تواصل معنا على: واتساب 22223333');
}
document.getElementById('tabCart').onclick = ()=>activateTab('tabCart');
document.getElementById('tabFav').onclick  = ()=>activateTab('tabFav');
document.getElementById('tabHome').onclick = ()=>activateTab('tabHome');
document.getElementById('tabMsg').onclick  = ()=>activateTab('tabMsg');
</script>
</body>
</html>
